<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:SaveTracker.ViewModels"
        mc:Ignorable="d" 
        d:DesignWidth="450" 
        d:DesignHeight="550"
        x:Class="SaveTracker.Views.Dialog.SettingsWindow"
        x:DataType="vm:SettingsViewModel"
        Title="Settings"
        Width="450" 
        Height="550"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        SystemDecorations="Full"
        Background="#1E1E1E">

    <Window.Styles>
        <!-- Button Styles -->
        <Style Selector="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="15,8"/>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Opacity" Value="0.9"/>
        </Style>
        
        <Style Selector="Button.Primary">
            <Setter Property="Background" Value="#0E639C"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="Button.Primary:pointerover">
            <Setter Property="Background" Value="#1177BB"/>
        </Style>
        
        <Style Selector="Button.Success">
            <Setter Property="Background" Value="#2D7D2D"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style Selector="Button.Success:pointerover">
            <Setter Property="Background" Value="#3A9A3A"/>
        </Style>
        
        <Style Selector="Button.Secondary">
            <Setter Property="Background" Value="#3F3F46"/>
            <Setter Property="Foreground" Value="#CCCCCC"/>
        </Style>
        <Style Selector="Button.Secondary:pointerover">
            <Setter Property="Background" Value="#505050"/>
        </Style>
        
        <!-- CheckBox Styles -->
        <Style Selector="CheckBox">
            <Setter Property="Foreground" Value="#CCCCCC"/>
        </Style>
        
        <!-- Section Styles -->
        <Style Selector="TextBlock.SectionTitle">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,5,0,10"/>
        </Style>
        
        <Style Selector="TextBlock.Description">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#858585"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="28,5,0,0"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        
        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#252526" 
                Padding="20,15" 
                BorderBrush="#3F3F46" 
                BorderThickness="0,0,0,1">
            <TextBlock Text="Application Settings" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Foreground="White"/>
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" 
                      Padding="20,20,20,0"
                      VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20" Margin="0,0,0,20">
                
                <!-- General Settings Section -->
                <Border Background="#2D2D30" 
                        Padding="20" 
                        CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock Text="âš™ï¸ General" 
                                   Classes="SectionTitle"/>
                        
                        <StackPanel Spacing="8">
                            <CheckBox IsChecked="{Binding EnableAutomaticTracking}" 
                                      Content="Enable Game Watcher Game Tracking"/>
                            <TextBlock Text="Automatically detects when configured games are launched." 
                                       Classes="Description"/>
                        </StackPanel>
                        
                        <CheckBox IsChecked="{Binding StartWithWindows}" 
                                  Content="Start with Windows"/>
                        
                        <CheckBox IsChecked="{Binding StartMinimized}" 
                                  Content="Start Minimized to Tray"/>
                        
                        <CheckBox IsChecked="{Binding ShowDebugConsole}" 
                                  Content="Show Debug Console"/>
                    </StackPanel>
                </Border>

                <!-- Auto-Updater Section -->
                <Border Background="#2D2D30" 
                        Padding="20" 
                        CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock Text="ðŸ”„ Auto-Updater" 
                                   Classes="SectionTitle"/>
                        
                        <CheckBox IsChecked="{Binding CheckForUpdatesOnStartup}" 
                                  Content="Check for updates on startup"/>
                        
                        <Separator Background="#3F3F46" Margin="0,5"/>
                        
                        <Grid ColumnDefinitions="Auto,*" 
                              RowDefinitions="Auto,Auto,Auto"
                              Margin="0,5,0,0">
                            
                            <!-- Current Version Row -->
                            <TextBlock Grid.Row="0" 
                                       Grid.Column="0"
                                       Text="Current Version:" 
                                       Foreground="#CCCCCC" 
                                       VerticalAlignment="Center"
                                       Margin="0,0,10,0"/>
                            <TextBlock Grid.Row="0" 
                                       Grid.Column="1"
                                       Text="{Binding CurrentVersion}" 
                                       Foreground="#0E639C" 
                                       FontWeight="SemiBold" 
                                       VerticalAlignment="Center"/>
                            
                            <!-- Check Button Row -->
                            <Button Grid.Row="1" 
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Content="Check for Updates" 
                                    Command="{Binding CheckForUpdatesCommand}"
                                    IsEnabled="{Binding !IsCheckingForUpdates}"
                                    Classes="Primary"
                                    HorizontalAlignment="Left"
                                    Margin="0,10,0,0"/>
                            
                            <!-- Update Status Row -->
                            <TextBlock Grid.Row="2" 
                                       Grid.Column="0"
                                       Grid.ColumnSpan="2"
                                       Text="{Binding UpdateVersion}" 
                                       Foreground="#CCCCCC"
                                       FontWeight="SemiBold"
                                       Margin="0,10,0,0"
                                       IsVisible="{Binding UpdateVersion, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </Grid>
                        
                        <!-- Install Update Button -->
                        <Button Content="ðŸš€ Install Update" 
                                Command="{Binding InstallUpdateCommand}"
                                IsVisible="{Binding UpdateAvailable}"
                                Classes="Success"
                                HorizontalAlignment="Stretch"
                                Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer Actions -->
        <Border Grid.Row="2" 
                Background="#252526" 
                Padding="20,15" 
                BorderBrush="#3F3F46" 
                BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Spacing="10">
                <Button Content="Save &amp; Close" 
                        Command="{Binding SaveSettingsCommand}" 
                        Click="SaveButton_Click" 
                        Classes="Primary"/>
                <Button Content="Cancel" 
                        Click="CancelButton_Click" 
                        Classes="Secondary"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>